- if current_user
  - role = current_user.admin? ? :admin : :platform
- role ||= nil

.container
  .row
    .col-xs-12
      .title-separator
        .media
          .media-left.media-middle
            .icon-title
              %img.img-responsive{ src: image_path("icons/ico_broadcasts.png"), style: 'width: 30px; height: 30px;' }
          .media-body.media-bottom
            .media-heading.title-section Notícias

  = render 'shared/broadcasts/toolbar'

.container.noticias-destaques
  .row
    .col-xs-12
      .title-separator
        .media
          .media-body.media-bottom
            .media-heading.title-section Notícias em destaque
      .row
        - broadcasts.first(2).each do |object|
          - if role
            - like_path = url_for([:like, role, object])
            - dislike_path = url_for([:dislike, role, object])
          - cover = object.cover.url
          - cover ||= image_path("default/movie/image.png")

          .col-xs-3{ id: object.id }
            %img.img-responsive{ src: cover, style: 'height: 351px; width: 262px;' }
          .col-xs-3
            %h3.bold{ style: 'box-sizing: border-box; color: rgb(51, 51, 51); font-family: "Montserrat"; font-size: 23px; font-weight: 700; line-height: 26.4px; margin-bottom: 0px; margin-top: 10px; height: 50px' }
              = object.title
            .wine{ style: 'height: 20px;' }
              = object.spoiler_str
            .desc{ data: { tipsy: '' }, style: 'height: 218px; overflow: hidden;', title: "#{object.content_str}"}
              = object.content.html_safe
            .row
              .col-xs-6.pull-right
                .source.bold{ style: 'height: 20px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; font-size: 13px;' }
                  Fonte:
                  = object.more
              .col-xs-6.pull-left
                %span.bold.wine
                  = object.date_str
            - if role
              .row
                .broadcast-reaction
                  = render 'shared/reactions', resource: object, like_path: like_path, dislike_path: dislike_path

.container.noticias
  .row
    .col-xs-12
      - broadcasts.each_with_index do |object, index|
        - if index > 1
          - if role
            - like_path = url_for([:like, role, object])
            - dislike_path = url_for([:dislike, role, object])
          - cover = object.cover.url
          - cover ||= image_path("default/movie/image.png")

          .noticia-item
            .row
              .col-xs-3{ id: object.id }
                %img.img-responsive{ src: cover, style: 'height: 171px; width: 261px;' }
              .col-xs-9
                %h3.bold{ style: 'box-sizing: border-box; color: rgb(51, 51, 51); font-family: "Montserrat"; font-size: 24px; font-weight: 700; line-height: 26.4px; margin-bottom: 0px; margin-top: 0px; height: 25px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;' }
                  = object.title
                .wine{ style: 'height: 20px;' }
                  = object.spoiler_str
                .desc{ data: { tipsy: '' }, style: 'height: 79px; overflow: hidden;', title: "#{object.content_str}"}
                  = object.content.html_safe
                .row
                  .col-xs-6
                    .source.bold{ style: 'height: 20px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; font-size: 13px;' }
                      Fonte:
                      = object.more
                  .col-xs-6
                    %span.bold.wine
                      = object.date_str
                - if role
                  .row
                    .broadcast-reaction
                      = render 'shared/reactions', resource: object, like_path: like_path, dislike_path: dislike_path

  = render 'shared/pagination', resources: broadcasts
